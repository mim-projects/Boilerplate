<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:h="http://java.sun.com/jsf/html"
        template="/templates/template_admin.xhtml">
    <ui:define name="content_body">
        <div class="container">
            <h:form id="form_data" styleClass="card" rendered="#{not empty sectionCtrl.currentProject}">
                <div class="title-card">
                    <div class="title-card-icon-text">
                        <i class="pi pi-slack"/>
                        <span style="text-transform: uppercase">#{sectionCtrl.currentProject.nameKeyword} :: #{bundle.section}</span>
                    </div>
                    <div>
                        <p:commandButton icon="pi pi-plus" value="#{bundle.add}" actionListener="#{sectionCtrl.preCreateOrEdit(null)}"
                                         update="create" oncomplete="PF('create_wv').show()"/>
                    </div>
                </div>
                <div class="content-card">
                    <div style="overflow-x: auto">
                        <p:dataTable tableStyle="min-width: 60rem !important;"
                                     value="#{sectionCtrl.allSection}" var="section" styleClass="custom-table"
                                     paginator="true" paginatorPosition="bottom" rows="10">
                            <p:column headerText="#{bundle.name}" field="nameKeyword">
                                <p:commandButton styleClass="rounded-button ui-button-flat" value="#{section.nameKeyword}"
                                                 update="edit_name" oncomplete="PF('edit_name_wv').show()"
                                                 actionListener="#{sectionCtrl.preEditSection(section)}"/>
                            </p:column>
                            <p:column headerText="#{bundle.metadata}" field="metadataKeyword">
                                <p:commandButton styleClass="rounded-button ui-button-flat" value="#{section.metadataKeyword}"
                                                 update="edit_metadata" oncomplete="PF('edit_metadata_wv').show()"
                                                 actionListener="#{sectionCtrl.preEditSection(section)}"/>
                            </p:column>
                            <p:column headerText="#{bundle.description}" field="descriptionKeyword">
                                <p:commandButton styleClass="rounded-button ui-button-flat" value="#{section.descriptionKeyword}"
                                                 update="edit_description" oncomplete="PF('edit_description_wv').show()"
                                                 actionListener="#{sectionCtrl.preEditSection(section)}"/>
                            </p:column>
                            <p:column headerText="#{bundle.content}" field="contentKeyword">
                                <p:commandButton styleClass="rounded-button ui-button-flat" value="#{section.contentKeyword}"
                                                 actionListener="#{sectionCtrl.navigateContent(section)}"/>
                            </p:column>
                            <p:column width="10rem">
                                <p:commandLink styleClass="command-link" value="#{bundle.edit}"
                                               update="edit" oncomplete="PF('edit_wv').show()"
                                               actionListener="#{sectionCtrl.preCreateOrEdit(section)}"/>
                                <p:commandLink styleClass="command-link" value="#{bundle.remove}" update="@form" actionListener="#{sectionCtrl.remove(section)}">
                                    <p:confirm header="#{bundle.confirmation}" message="#{bundle.confirm_delete}" icon="pi pi-info-circle"/>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </h:form>
        </div>

        <h:form id="create">
            <p:dialog styleClass="custom-dialog" widgetVar="create_wv" header="#{bundle.create_item}"
                      closable="false" resizable="false" draggable="false" blockScroll="true" modal="true">
                <div class="input-group">
                    <p:outputLabel for="@next" value="#{bundle.name}"/>
                    <p:inputText value="#{sectionCtrl.currentName}"/>
                </div>
                <div class="input-group" style="margin: 0.5rem 0 2rem 0">
                    <div class="custom-badge-firing" style="padding: 1rem; display: grid">
                        <span style="font-weight: bold; text-transform: uppercase">#{bundle.section_name_definition}</span>
                        <span>
                            <h:outputText escape="false" value="#{bundle.section_name_definition_description}"/>
                        </span>
                    </div>
                </div>
                <div style="display: grid; max-height: 50vh">
                    <div style="display: flex; justify-content: flex-end; gap: 1rem">
                        <p:commandButton styleClass="ui-button-secondary" value="#{bundle.cancel}"
                                         oncomplete="PF('create_wv').hide()"/>
                        <p:commandButton value="#{bundle.accept}" actionListener="#{sectionCtrl.create()}"
                                         update="form_data" oncomplete="PF('create_wv').hide()"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>

        <h:form id="edit">
            <p:dialog styleClass="custom-dialog" widgetVar="edit_wv" header="#{bundle.edit_item}"
                      closable="false" resizable="false" draggable="false" blockScroll="true" modal="true">
                <div class="input-group">
                    <p:outputLabel for="@next" value="#{bundle.name}"/>
                    <p:inputText value="#{sectionCtrl.currentName}"/>
                </div>
                <div class="input-group" style="margin: 0.5rem 0 2rem 0">
                    <div class="custom-badge-firing" style="padding: 1rem; display: grid">
                        <span style="font-weight: bold; text-transform: uppercase">#{bundle.project_name_definition}</span>
                        <span>
                            <h:outputText escape="false" value="#{bundle.project_name_definition_description}"/>
                        </span>
                    </div>
                </div>
                <div style="display: grid; max-height: 50vh">
                    <div style="display: flex; justify-content: flex-end; gap: 1rem">
                        <p:commandButton styleClass="ui-button-secondary" value="#{bundle.cancel}"
                                         oncomplete="PF('edit_wv').hide()"/>
                        <p:commandButton value="#{bundle.accept}" actionListener="#{sectionCtrl.update()}"
                                         update="form_data" oncomplete="PF('edit_wv').hide()"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>

        <h:form id="edit_name">
            <p:dialog styleClass="custom-dialog-top" widgetVar="edit_name_wv" header="#{bundle.edit_item}"
                      closable="false" resizable="false" draggable="false" blockScroll="true" modal="true">
                <ui:repeat value="#{sectionCtrl.nameArray}" var="nameArr" varStatus="indexStatus">
                    <div class="input-group" style="margin-bottom: 2rem">
                        <div style="display: flex; gap: 0.5rem; align-items: center; width: 100%">
                            <span class="#{nameArr.languageId.icon}"/>
                            <h:outputText value="#{nameArr.languageId.name}"/>
                        </div>
                        <p:inputText value="#{sectionCtrl.nameArray[indexStatus.index].value}"/>
                    </div>
                </ui:repeat>
                <div style="display: grid; max-height: 50vh">
                    <div style="display: flex; justify-content: flex-end; gap: 1rem">
                        <p:commandButton styleClass="ui-button-secondary" value="#{bundle.cancel}"
                                         oncomplete="PF('edit_name_wv').hide()"/>
                        <p:commandButton value="#{bundle.accept}" actionListener="#{sectionCtrl.updateName()}"
                                         update="form_data" oncomplete="PF('edit_name_wv').hide()"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>

        <h:form id="edit_description">
            <p:dialog styleClass="custom-dialog-top" widgetVar="edit_description_wv" header="#{bundle.edit_item}"
                      closable="false" resizable="false" draggable="false" blockScroll="true" modal="true">
                <ui:repeat value="#{sectionCtrl.descriptionArray}" var="descriptionArr" varStatus="indexStatus">
                    <div class="input-group" style="margin-bottom: 2rem">
                        <div style="display: flex; gap: 0.5rem; align-items: center; width: 100%">
                            <span class="#{descriptionArr.languageId.icon}"/>
                            <h:outputText value="#{descriptionArr.languageId.name}"/>
                        </div>
                        <p:inputTextarea rows="3" value="#{sectionCtrl.descriptionArray[indexStatus.index].value}"/>
                    </div>
                </ui:repeat>
                <div style="display: grid; max-height: 50vh">
                    <div style="display: flex; justify-content: flex-end; gap: 1rem">
                        <p:commandButton styleClass="ui-button-secondary" value="#{bundle.cancel}"
                                         oncomplete="PF('edit_description_wv').hide()"/>
                        <p:commandButton value="#{bundle.accept}" actionListener="#{sectionCtrl.updateDescription()}"
                                         update="form_data" oncomplete="PF('edit_description_wv').hide()"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>

        <h:form id="edit_metadata">
            <p:dialog styleClass="custom-dialog-top" widgetVar="edit_metadata_wv" header="#{bundle.edit_item}"
                      closable="false" resizable="false" draggable="false" blockScroll="true" modal="true">
                <ui:repeat value="#{sectionCtrl.metadataArray}" var="metadataArr" varStatus="indexStatus">
                    <div class="input-group" style="margin-bottom: 2rem">
                        <div style="display: flex; gap: 0.5rem; align-items: center; width: 100%">
                            <span class="#{metadataArr.languageId.icon}"/>
                            <h:outputText value="#{metadataArr.languageId.name}"/>
                        </div>
                        <p:inputTextarea rows="3" value="#{sectionCtrl.metadataArray[indexStatus.index].value}"/>
                    </div>
                </ui:repeat>
                <div style="display: grid; max-height: 50vh">
                    <div style="display: flex; justify-content: flex-end; gap: 1rem">
                        <p:commandButton styleClass="ui-button-secondary" value="#{bundle.cancel}"
                                         oncomplete="PF('edit_metadata_wv').hide()"/>
                        <p:commandButton value="#{bundle.accept}" actionListener="#{sectionCtrl.updateMetadata()}"
                                         update="form_data" oncomplete="PF('edit_metadata_wv').hide()"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>

        <h:form>
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" styleClass="custom-dialog">
                <p:commandButton value="#{bundle.cancel}" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                <p:commandButton value="#{bundle.accept}" type="button" styleClass="ui-confirmdialog-yes" />
            </p:confirmDialog>
        </h:form>
    </ui:define>
</ui:composition>